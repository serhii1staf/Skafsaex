from PySide6.QtWidgets import QApplication, QMainWindow, QLabel, QPushButton, QVBoxLayout, QWidget, QMessageBox, QFileDialog
from PySide6.QtGui import QIcon, QPixmap
from PySide6.QtCore import QTimer
import sys

class TelegramApp(QMainWindow):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("Telegram Demo App")
        self.setGeometry(200, 200, 400, 600)
        self.current_theme = "light"
        self.first_time = True

        # Главное окно
        self.central_widget = QWidget()
        self.setCentralWidget(self.central_widget)
        self.layout = QVBoxLayout(self.central_widget)

        # Приветствие
        self.welcome_label = QLabel("Добро пожаловать в приложение!", self)
        self.welcome_label.setAlignment(Qt.AlignCenter)
        self.layout.addWidget(self.welcome_label)

        QTimer.singleShot(7000, self.hide_welcome_message)

        # Кнопки меню
        self.profile_button = QPushButton("Профиль")
        self.articles_button = QPushButton("Статьи")
        self.settings_button = QPushButton("Настройки")
        self.profile_button.setIcon(QIcon("profile_icon.png"))
        self.articles_button.setIcon(QIcon("articles_icon.png"))
        self.settings_button.setIcon(QIcon("settings_icon.png"))

        self.profile_button.clicked.connect(self.show_profile_page)
        self.articles_button.clicked.connect(self.show_articles_page)
        self.settings_button.clicked.connect(self.show_settings_page)

        self.layout.addWidget(self.profile_button)
        self.layout.addWidget(self.articles_button)
        self.layout.addWidget(self.settings_button)

    def hide_welcome_message(self):
        self.welcome_label.hide()
        if self.first_time:
            QMessageBox.information(self, "Подсказка", "Нажмите на ‘Профиль’, чтобы увидеть ваши данные.")
            self.first_time = False

    # Страница профиля
    def show_profile_page(self):
        profile_window = QWidget()
        profile_layout = QVBoxLayout()

        profile_picture_label = QLabel(self)
        profile_picture_label.setPixmap(QPixmap("default_profile.jpg").scaled(100, 100))
        profile_layout.addWidget(profile_picture_label)

        profile_name_label = QLabel("Ваше имя: Иван Иванов")
        profile_description_label = QLabel("Описание: Пример биографии")

        edit_profile_button = QPushButton("Редактировать профиль")
        edit_profile_button.clicked.connect(self.edit_profile)

        profile_layout.addWidget(profile_name_label)
        profile_layout.addWidget(profile_description_label)
        profile_layout.addWidget(edit_profile_button)

        profile_window.setLayout(profile_layout)
        profile_window.show()

    # Редактирование профиля
    def edit_profile(self):
        QMessageBox.information(self, "Редактирование", "Открыта форма редактирования профиля.")

    # Страница со статьями
    def show_articles_page(self):
        articles_window = QWidget()
        articles_layout = QVBoxLayout()

        article_title = QLabel("Статья 1: Как использовать приложение?")
        article_picture = QLabel()
        article_picture.setPixmap(QPixmap("article1.jpg").scaled(200, 150))
        article_text_button = QPushButton("Открыть статью")
        article_text_button.clicked.connect(lambda: self.show_article_details("Текст статьи", "Закрыть"))

        articles_layout.addWidget(article_title)
        articles_layout.addWidget(article_picture)
        articles_layout.addWidget(article_text_button)
        articles_window.setLayout(articles_layout)
        articles_window.show()

    # Открытие отдельной статьи
    def show_article_details(self, article_text, button_text):
        QMessageBox.information(self, "Текст статьи", f"{article_text}")

    # Страница настроек
    def show_settings_page(self):
        settings_window = QWidget()
        settings_layout = QVBoxLayout()

        change_theme_button = QPushButton("Сменить цветовую тему")
        change_theme_button.clicked.connect(self.toggle_theme)

        toggle_notifications_button = QPushButton("Включить/отключить уведомления")
        toggle_notifications_button.clicked.connect(self.toggle_notifications)

        settings_layout.addWidget(change_theme_button)
        settings_layout.addWidget(toggle_notifications_button)
        settings_window.setLayout(settings_layout)
        settings_window.show()

    def toggle_theme(self):
        if self.current_theme == "light":
            self.setStyleSheet("background-color: #2E2E2E; color: white;")
            self.current_theme = "dark"
        elif self.current_theme == "dark":
            self.setStyleSheet("background-color: #4B8BFF; color: black;")
            self.current_theme = "blue"
        else:
            self.setStyleSheet("")
            self.current_theme = "light"

    def toggle_notifications(self):
        QMessageBox.information(self, "Уведомления", "Уведомления включены/отключены")

if __name__ == "__main__":
    app = QApplication(sys.argv)
    window = TelegramApp()
    window.show()
    sys.exit(app.exec())
