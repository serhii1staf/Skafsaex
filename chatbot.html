<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatBot</title>
    <style>
        /* Общие стили для ChatBot */
        body {
            font-family: Arial, sans-serif;
        }

        .chatbot-container {
            background-color: #001f3d; /* Темно-синий фон */
            color: white;
            padding: 20px;
            border-radius: 10px;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            max-width: 100%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }

        .chatbot-header {
            font-size: 20px;
            margin-bottom: 10px;
            text-align: center;
        }

        .chatbox {
            flex-grow: 1;
            overflow-y: auto;
            margin-bottom: 10px;
            max-height: 300px;
        }

        .chatbot-input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .chatbot-send-btn {
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Для мобильных устройств */
        @media screen and (max-width: 600px) {
            .chatbot-container {
                width: 100%;
                bottom: 10px;
                right: 10px;
            }

            .chatbot-header {
                font-size: 18px;
            }

            .chatbox {
                max-height: 200px;
            }
        }

        /* Стили для сообщений */
        .userMessage, .botMessage {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .userMessage {
            background-color: #4CAF50;
            color: white;
            align-self: flex-end;
        }

        .botMessage {
            background-color: #333;
            color: white;
            align-self: flex-start;
        }

        .input-container {
            display: flex;
            flex-direction: column;
        }
    </style>
</head>
<body>

<!-- Структура ChatBot -->
<div id="chatbot" class="chatbot-container">
    <div class="chatbot-header">ChatBot</div>
    <div id="chatBox" class="chatbox"></div>
    <div class="input-container">
        <input id="userInput" class="chatbot-input" type="text" placeholder="Напишите сообщение..." />
        <button id="sendButton" class="chatbot-send-btn">Отправить</button>
    </div>
</div>

<script>
    // Отправка сообщений
    document.getElementById('sendButton').addEventListener('click', function() {
        const userMessage = document.getElementById('userInput').value;
        
        if(userMessage.trim() === "") return; // Если сообщение пустое, ничего не отправляем

        // Отображаем сообщение пользователя в чат
        displayUserMessage(userMessage);

        // Отправка сообщения на сервер для обработки
        fetch('https://api.openai.com/v1/completions', { // API endpoint OpenAI
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': 'Bearer sk-XXXX' // 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';
            },
            body: JSON.stringify({
                model: 'text-davinci-003',
                prompt: userMessage,
                max_tokens: 100
            })
        })
        .then(response => response.json())
        .then(data => {
            // Отображаем ответ от бота
            displayBotMessage(data.choices[0].text);
        })
        .catch(error => {
            console.error('Error:', error);
        });

        // Очищаем поле ввода после отправки
        document.getElementById('userInput').value = '';
    });// Функция для отображения сообщений пользователя
    function displayUserMessage(message) {
        const chatBox = document.getElementById('chatBox');
        const userMessage = document.createElement('div');
        userMessage.classList.add('userMessage');
        userMessage.textContent = message;
        chatBox.appendChild(userMessage);
        chatBox.scrollTop = chatBox.scrollHeight; // Прокрутка до конца чата
    }

    // Функция для отображения ответов бота
    function displayBotMessage(message) {
        const chatBox = document.getElementById('chatBox');
        const botMessage = document.createElement('div');
        botMessage.classList.add('botMessage');
        botMessage.textContent = message;
        chatBox.appendChild(botMessage);
        chatBox.scrollTop = chatBox.scrollHeight; // Прокрутка до конца чата
    }
</script>

</body>
</html>
